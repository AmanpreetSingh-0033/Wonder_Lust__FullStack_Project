<% layout("../layouts/boilerplate") %>
<body>
    <div class="container d-flex justify-content-center align-items-center my-5">
        <div class="form-wrapper shadow-lg p-4">
            <h2 class="text-center mb-4 text-danger fw-bold">Add New Listing</h2>

            <form action="/listings" method="post" novalidate class="needs-validation" enctype="multipart/form-data">
                <div class="mb-3">
                    <label class="form-label fw-semibold h5">Title</label>
                    <input type="text" class="form-control form-field" name="listing[title]" placeholder="Enter title" required>
                    <div class="valid-feedback">Looks good!</div>
                    <div class="invalid-feedback">Enter a catchy title</div>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold h5">Description</label>
                    <textarea class="form-control form-field" name="listing[description]" placeholder="Enter description" required rows="3"></textarea>
                    <div class="invalid-feedback">Enter valid description (shorter)</div>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold h5">Price</label>
                    <input type="number" class="form-control form-field" name="listing[price]" placeholder="Enter price" required>
                    <div class="invalid-feedback">Enter valid price (positive number)</div>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold h5">Upload Image</label>
                    <input type="file" class="form-control form-field" name="listing[image]" required>
                    <div class="invalid-feedback">Image required to upload</div>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold h5">Location</label>
                    <input type="text" class="form-control form-field" name="listing[location]" placeholder="Enter location" required>
                    <div class="invalid-feedback">Enter valid location</div>
                </div>

                <div class="mb-4">
                    <label class="form-label fw-semibold h5">Country</label>
                    <input type="text" class="form-control form-field" name="listing[country]" placeholder="Enter country" required>
                    <div class="invalid-feedback">Enter valid country</div>
                </div>

                <div class="mb-4">
                    <label class="form-label fw-semibold h5 d-block">Categories</label>
                    <div class="category-options d-flex flex-wrap gap-3">
                        <% const categories = [ "Play Station", "Wonder Land", "Castels", "Trending", "Mountains",
                          "Beaches", "Hotels", "Rooms", "Farms", "Arctic",
                          "Clubs", "Boats", "Houses", "Pools", "City", "Kids" ]; %>
                        <% categories.forEach(cat=> { %>
                            <label class="custom-checkbox">
                                <input type="checkbox" name="listing[category][]" value="<%= cat %>">
                                <span class="checkmark"><%= cat %></span>
                            </label>
                        <% }) %>
                    </div>
                    <div class="form-text text-danger mt-1">You can select multiple categories.</div>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-danger px-5 py-2 shadow-sm hover-scale">Add</button>
                </div>
            </form>
        </div>
    </div>
</body>
